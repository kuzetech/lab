# 创建 chart 模版
helm create mychart

# 测试模版生成
helm template funnydb-events-agent ./charts/funnydb-events-agent -f value.yaml

# 查看内网ingest版本
helm list | grep ingest
helm list -a |grep ingest

# 仓库相关
helm repo add turbine https://registry.biubiubiu.io/chartrepo/turbine
helm repo update

# 配置相关
# 导出
helm get values ingest > ~/helm/ingest.yaml
helm get values api > ~/helm/api.yaml

# 更新版本(若仅更新配置,则版本号要使用原先的版本号)
helm upgrade -f ~/helm/api.yaml --version 0.9.0-s230208-1411-0e25fa09 turbine-api turbine/turbine-api
helm upgrade --install clunky-serval

# 查看历史部署版本
helm history ingest

# 回滚操作
# 回滚到指定版本,这里的1指的是上面列出的revision版本
helm rollback ingest 1

# 安装
helm install --dry-run --debug test ./mychart 
helm install test ./mychart -f value.yaml

# 卸载
helm uninstall funnydb-statistician-cron

## 推送脚本
export HELM_REPO_USERNAME=huangshaowei
export HELM_REPO_PASSWORD=xxxxxxx
helm cm-push charts/kafka https://registry.sofunny.io/chartrepo/turbine
